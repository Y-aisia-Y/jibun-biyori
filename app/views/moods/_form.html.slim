= form_with model: mood, url: record_mood_path(record), class: "space-y-6" do |f|
  - if mood.errors.any?
    #error_explanation.bg-red-100.border.border-red-400.text-red-700.px-4.py-3.rounded
      p.font-bold = "#{mood.errors.count} ä»¶ã®ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™:"
      ul.list-disc.ml-5.mt-2
        - mood.errors.full_messages.each do |message|
          li = message

  .p-6.bg-white.rounded-xl.shadow-lg.border.border-gray-100
    h2.text-xl.font-semibold.text-gray-800.mb-4 æ°—åˆ†ã‚’é¸æŠã—ã¦ãã ã•ã„

    / 5æ®µéšè©•ä¾¡ UI
    .flex.justify-between.items-center.p-4.bg-indigo-50.rounded-lg.shadow-inner(
      data-controller="rating"
    )
      - mood_levels = [[5,'ã¨ã¦ã‚‚è‰¯ã„','ğŸ˜„','text-green-600'],[4,'è‰¯ã„','ğŸ™‚','text-lime-600'],[3,'æ™®é€š','ğŸ˜','text-yellow-600'],[2,'æ‚ªã„','ğŸ™','text-orange-600'],[1,'ã¨ã¦ã‚‚æ‚ªã„','ğŸ˜','text-red-600']]

      - mood_levels.each do |value, label, icon, color|
        .flex.flex-col.items-center.space-y-1.group.transition-transform.duration-200.ease-in-out.hover:scale-105
          = f.radio_button :rating, value,
            id: "mood_rating_#{value}",
            class: "hidden",
            data: { action: "change->rating#select" }

          label.p-3.rounded-full.cursor-pointer.transition-all.duration-300.ease-in-out(
            for="mood_rating_#{value}"
            data-rating-target="label"
            class=(mood.rating == value ? "bg-white shadow-xl ring-4 ring-indigo-400" : "bg-gray-100 hover:bg-indigo-200")
          )
            span.text-3xl class=color
              = icon

          .text-sm.font-medium.mt-1.transition-colors.duration-300(
            data-rating-target="text"
            class=(mood.rating == value ? "text-indigo-600 font-bold" : "text-gray-600")
          )
            = label

    / ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ›æ¬„
    .mt-6
      = f.label :comment, "ã‚³ãƒ¡ãƒ³ãƒˆ", class: "block text-sm font-medium text-gray-700 mb-1"
    .field
      = f.text_area :comment, rows: 6, class: 'mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 p-3'

  / é€ä¿¡ãƒœã‚¿ãƒ³
  .flex.justify-end.space-x-3
    
    = f.submit "æ°—åˆ†ã‚’ä¿å­˜",
      class: "py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition cursor-pointer"
    = link_to 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', record_path(record),
      class: "py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition"