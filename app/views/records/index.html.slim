/ ãƒ˜ãƒƒãƒ€ãƒ¼
.header.bg-green-50.px-4.py-3.flex.items-center.justify-between.relative[data-controller="menu"]
  h1.text-lg.font-bold.text-green-800 ğŸŒ¿ã˜ã¶ã‚“æ—¥å’Œ
  button.text-2xl.p-2.hover:bg-green-100.rounded.transition[data-action="click->menu#toggle"] â˜°

  #menu-panel.hidden.bg-white.border.border-gray-200.shadow-lg.rounded-md.absolute.right-4.top-full.mt-2.w-auto.z-50[data-menu-target="panel"]
    ul.py-1
      li
        hr.my-1.border-gray-200
      li
        = link_to "ä½“èª¿ã‚’è¨˜éŒ²", health_records_path,
          class: "block px-4 py-2 text-gray-700 hover:bg-gray-100 transition"
      li
        = link_to "æ—¥è¨˜ã®è¨˜å…¥", diary_records_path,
          class: "block px-4 py-2 text-gray-700 hover:bg-gray-100 transition"
      li
        = link_to "ãƒã‚¤ãƒšãƒ¼ã‚¸", mypage_root_path,
          class: "block px-4 py-2 text-gray-700 hover:bg-gray-100 transition"

.bg-gray-50.border-b
  / æ—¥ä»˜ãƒŠãƒ“
  .px-4.py-3
    = render "date_navigator"

  / ã‚µãƒãƒªãƒ¼
  .px-4.py-3.space-y-2
    - if @record.persisted?
      / ä»Šæ—¥ã®ä½“èª¿ã¨ç·¨é›†ãƒœã‚¿ãƒ³ã‚’æ¨ªä¸¦ã³ã«é…ç½®
      .flex.items-center.justify-between.mb-4
        .text-1xl.font-bold.text-gray-800
          | ä»Šæ—¥ã®ä½“èª¿
        = link_to 'ç·¨é›†', edit_record_path(@record), class: 'text-sm text-yellow-600 hover:underline'
      
      / ã‚µãƒãƒªãƒ¼è¡¨ç¤º
      = render "mood_summary", record: @record
    - else
      .text-center.text-gray-500.py-4
        p.text-sm = "#{l(@date, format: :long)}ã®è¨˜éŒ²ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“"

/ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
#timeline.relative.max-h-screen.overflow-y-auto[
  data-controller="timeline"
  data-timeline-current-hour-value=@current_hour
  data-timeline-current-minute-value=@current_minute
]

  / ç¾åœ¨æ™‚åˆ»ã®ãƒ©ã‚¤ãƒ³
  .now-line.absolute.left-0.right-0.h-0.5.bg-red-500.z-10

  / æ™‚é–“ãƒ–ãƒ­ãƒƒã‚¯
  - (0..23).each do |hour| 
    .hour-block.relative.group
      / æ™‚åˆ»ãƒ©ãƒ™ãƒ«
      .w-14.text-right.pr-2.text-xs.text-gray-400.pt-1
        = "%02d:00" % hour

      / æ™‚é–“ãƒ–ãƒ­ãƒƒã‚¯
      .flex.items-start.border-b.h-20.relative  
        - activities_by_hour = @activities.group_by { |a| a.start_time.hour }
        - if activities_by_hour[hour]
          = render activities_by_hour[hour]

        - if @record.persisted?
          = link_to "ï¼‹",
            new_record_activity_path(@record, date: @date, hour: hour),
            class: "add-button hidden group-hover:flex"
        - else
          = button_to "ï¼‹",
            create_with_activity_records_path(date: @date, hour: hour),
            method: :post,
            class: "add-button hidden group-hover:flex"